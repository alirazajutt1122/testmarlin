
<!--<div class="row">
    <div class="col-lg-12 col-xs-12">-->
<section class="widget" widget="">
    <header>
        <h3><span class="fw-semi-bold">{{ 'Menu.Security Haircut' | translate }}</span></h3>
        <div class="other_btns">
            <button class="add_new_btn" data-toggle="modal" *ngIf="userService.isAuhtorized(userService.EB_SECURITY_HAIRCUT_NEW)" data-target="#add_new"
                role="button" data-backdrop="static" title="{{ 'Translation.Add' | translate }}" (click)="onNewAction()"><i class="fa fa-plus" aria-hidden="true"></i> </button>
            <button data-toggle="collapse" data-target="#filter_box" class="filter_btn"><i class="fa fa-filter mr-2" aria-hidden="true"></i></button>
        </div>
        <!--<div class="widget-controls">
                    <a data-widgster="expand" title="Expand" href="#"><i class="glyphicon glyphicon-chevron-up"></i></a>
                    <a data-widgster="collapse" title="Collapse" href="#"><i class="glyphicon glyphicon-chevron-down"></i></a>
                </div>-->
    </header>

    <div id="filter_box" class="collapse in">
        <div class="row">
            <div class="col-sm-3 fields_box">
                <label for="exchangeName">{{ 'Translation.Exchange' | translate }} <span class="validation">*</span></label>
                <wj-combo-box id="exchangeName" class="wijmo_style" (ngModelChange)="onExchangeChange($event)" [itemsSource]="exchangeNameList"
                    [(ngModel)]="searchExchangeId" displayMemberPath="exchangeCode" selectedValuePath="exchangeId" tabindex="1"
                    [isEditable]="true">
                </wj-combo-box>
            </div>
            <div class="col-sm-1">
                <div class="form_search">
                    <button [class]="searchButtonClass" title="{{ 'Translation.Search' | translate }}" *ngIf="userService.isAuhtorized(userService.EB_SECURITY_HAIRCUT_VIEW)"
                        data-toggle="collapse in" data-target="#filter_box" (click)="onSearchAction()" role="button"><span class="fa fa-search"></span> </button>
                </div>
            </div>
        </div>
    </div>

    <div class="table_container">
        <wj-flex-grid [itemsSource]="itemsList" [isReadOnly]="true" [selectionMode]="'Row'" [autoSizeMode]="'Headers'" [headersVisibility]="'Column'"
            style="height: 320px;" #flex>
            <wj-flex-grid-filter [filterColumns]="['exchangeMarketSecurity.exchangeCode','exchangeMarketSecurity.marketCode','exchangeMarketSecurity.securityCode','haircut']"></wj-flex-grid-filter>
            <wj-flex-grid-column [header]="'Translation.Exchange' | translate" [align]="'left'" [binding]="'exchangeMarketSecurity.exchangeCode'" [width]="'0.5*'"
                [minWidth]="30"></wj-flex-grid-column>
            <wj-flex-grid-column [header]="'Translation.Market' | translate" [align]="'left'" [binding]="'exchangeMarketSecurity.marketCode'" [width]="'0.5*'"
                [minWidth]="30"></wj-flex-grid-column>
            <wj-flex-grid-column [header]="'Translation.Security' | translate" [align]="'left'" [binding]="'exchangeMarketSecurity.securityCode'" [width]="'0.5*'"
                [minWidth]="30"></wj-flex-grid-column>
            <wj-flex-grid-column [header]="'Translation.Haircut' | translate" [align]="'right'" [binding]="'haircut'" [format]="'n2'" [width]="'0.5*'" [minWidth]="30"></wj-flex-grid-column>
            <wj-flex-grid-column [header]="'Common.Action' | translate" [width]="'0.2*'" [minWidth]="30" [align]="'center'" *ngIf="userService.isAuhtorized(userService.EB_SECURITY_HAIRCUT_UPDATE)">
                <ng-template wjFlexGridCellTemplate [cellType]="'Cell'">
                    <!--<button  id="btnEdit" class="on_edit_button" role="button"
                        (click)="onEditAction()" title="Edit"  data-target="#add_new" data-toggle="modal"
                        data-backdrop="static"> <img src="assets/img/edit_orange.png"/> </button>-->
                    <img src="assets/img/edit_orange.png" class="gridImg" title="{{ 'Translation.Edit' | translate }}" (click)="onEditAction()" data-target="#add_new" data-toggle="modal" data-backdrop="static"
                    />
                </ng-template>
            </wj-flex-grid-column>
        </wj-flex-grid>

    </div>
    <div class="row"></div>
    <div class="btn-group col-xs-12 align-right">
        <!-- Paginator -->
        <wj-collection-view-pager [cv]="flex?.collectionView"></wj-collection-view-pager>
        <!-- page size -->
        <wj-menu [(value)]="pageSize" [header]="'Common.Page Size' | translate">
			<wj-menu-item [value]="0">{{ 'Common.No Paging' | translate }}</wj-menu-item>
			<wj-menu-item [value]="5">5 {{ 'Common.items' | translate }}</wj-menu-item>
			<wj-menu-item [value]="10">10 {{ 'Common.items' | translate }}</wj-menu-item>
			<wj-menu-item [value]="20">20 {{ 'Common.items' | translate }}</wj-menu-item>
			<wj-menu-item [value]="30">30 {{ 'Common.items' | translate }}</wj-menu-item>
			<wj-menu-item [value]="50">50 {{ 'Common.items' | translate }}</wj-menu-item>
			<wj-menu-item [value]="100">100 {{ 'Common.items' | translate }}</wj-menu-item>
		  </wj-menu>
    </div>
</section>
<!--</div>
</div>-->


<!-- Add New Bank Modal -->
<div id="add_new" class="modal fade" role="dialog" data-keyboard="true">
    <div class="modal-dialog">

        <!-- Modal content-->
        <div class="modal-content">
            <!--<div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" (click)="onCancelAction()">&times;</button>
                <h4 class="modal-title">Security Haircut</h4>
            </div>-->

            <form class="form-horizontal form-label-left" method="post" data-parsley-priority-enabled="false" novalidate="novalidate"
                role="form" [formGroup]="myForm" (ngSubmit)="onSaveAction(myForm.value, myForm.valid)">
                <div class="modal-body modal-no-border">


                    <div class="row setup_box_container">
                        <div class="col-md-3 col-sm-5 modal_left">
                            <div class="wizard_Logo">
                                <img src="assets/img/Security-Haircut.png" class="formImg"/>
                                <h4>{{ 'Menu.Security Haircut' | translate }}</h4>
                                <p>{{ 'Translation.Management of percentage deduction from the market value of securities in exchange' | translate }}</p>
                            </div>
                        </div>
                        <div class="col-md-9 col-sm-7 modal_center">
                            <div class="row" style="margin: 40px 40px 0px 40px">

                                <div class="col-sm-12 fields_box">
                                    <label for="symbol">{{ 'Translation.Security' | translate }} <span class="validation">*</span></label>
                                    <wj-auto-complete id="symbol" formControlName="symbol" [isEditable]="true" [isDisabled]="isEditing" #symbol [itemsSource]="symbolExangeMarketList"
                                        (selectedIndexChanged)="onSymbolChange()" displayMemberPath="displayName_" [(ngModel)]="symbolMarkerExchange"
                                        selectedValuePath="value" [isRequired]="true" [maxItems]="50">
                                    </wj-auto-complete>
                                    <div *ngIf="myForm.controls['symbol'].hasError('required')" [hidden]="myForm.controls.symbol.valid || (myForm.controls.symbol.pristine && !isSubmitted)"
                                        class="text-danger">{{ 'Translation.Symbol is required' | translate }}.</div>
                                </div>

                                <div class="col-sm-6 fields_box">
                                    <label for="marketName">{{ 'Translation.Market' | translate }}</label>
                                    <div class="sub_heading"><b> {{market}}</b></div>
                                </div>
                                <div class="col-sm-6 fields_box">
                                    <label for="exchangeName">{{ 'Translation.Exchange' | translate }}</label>
                                    <div class="sub_heading"><b> {{_exchange}}</b></div>
                                </div>
                            </div>
                            <div class="row" style="margin: 40px 40px 0px 40px">

                                <div class="col-sm-12 fields_box">
                                    <label for="defaultSecurityHaircut">{{ 'Menu.Security Haircut' | translate }}(%)<span class="validation">*</span></label>
                                    <!--maxlength="8"-->
                                    <wj-input-number id="defaultSecurityHaircut" class="wijmo_style" [(ngModel)]="selectedItem.haircut" formControlName="defaultSecurityHaircut"
                                        [min]="0.01" [max]="100.00" format="'n2'" (ngModelChange)="onDefaultSecurityHaircutChange($event)"
                                        myForm required [isRequired]="true">
                                    </wj-input-number>
                                    <div *ngIf="defaultSecurityHaircut" class="text-danger">{{ 'Translation.Default Security Haircut is out of Range' | translate }}.</div>
                                </div>

                            </div>
                        </div>
                    </div>
                </div>

                <div class="orange_footer_small">
                    <button id="btnSave" type="submit" *ngIf="!isEditing && userService.isAuhtorized(userService.EB_SECURITY_HAIRCUT_NEW)" class="save_btn"
                        (click)="FinalSave()">{{ 'Common.Save' | translate }}</button>
                    <button id="btnEdit" type="submit" *ngIf="isEditing && userService.isAuhtorized(userService.EB_SECURITY_HAIRCUT_UPDATE)"
                        class="save_btn" (click)="FinalSave()">{{ 'Common.Update' | translate }}</button>
                    <button type="button" class="cancel_btn" data-dismiss="modal" (click)="onCancelAction()">{{ 'Common.Cancel' | translate }}</button>
                </div>
            </form>
        </div>
    </div>
</div>
<dialog-cmp #dialogCmp (btnClick)="getNotification($event)"> </dialog-cmp>